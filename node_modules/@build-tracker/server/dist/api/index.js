"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var insert_1 = require("./insert");
var read_1 = require("./read");
var defaultBuildInsert = function () { return Promise.resolve(); };
var middleware = function (router, config, handlers) {
    var _a = (handlers || {}).onBuildInsert, onBuildInsert = _a === void 0 ? defaultBuildInsert : _a;
    router.post('/api/builds', insert_1.insertBuild(config.queries.build, config, onBuildInsert));
    router.get('/api/builds/:limit?', read_1.queryByRecent(config.queries.builds, config));
    router.get('/api/builds/range/:startRevision..:endRevision', read_1.queryByRevisionRange(config.queries.builds));
    router.get('/api/builds/time/:startTimestamp..:endTimestamp', read_1.queryByTimeRange(config.queries.builds, config));
    router.get('/api/builds/list/*', read_1.queryByRevisions(config.queries.builds));
    router.get('/api/build/:revision', read_1.queryByRevision(config.queries.build));
    return router;
};
exports.default = middleware;
//# sourceMappingURL=index.js.map